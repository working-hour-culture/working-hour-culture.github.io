<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css"
          integrity="sha512-wcw6ts8Anuw10Mzh9Ytw4pylW8+NAD4ch3lqm9lzAsTxg0GFeJgoAtxuCLREZSC5lUXdVyo/7yfsqFjQ4S+aKw=="
          crossorigin=""/>



    <script src="https://unpkg.com/leaflet@1.3/dist/leaflet.js"></script>

    <!-- Load animation tweening lib requirement for CanvasFlowMapLayer -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.6.0/Tween.min.js"></script>

    <!-- then load CanvasFlowMapLayer -->
    <script src="Leaflet.Canvas-Flowmap-Layer-master/src/CanvasFlowmapLayer.js"></script>

    <style type="text/css">
        html, body, #mapid {
            height: 100%;
            width: 100%;
        }


        .custom-popup .leaflet-popup-content-wrapper a {
            color:rgba(255,255,255,0.1);
        }
        .custom-popup .leaflet-popup-tip-container {
            width:60px;
            height:30px;
        }
        .custom-popup .leaflet-popup-tip {
            background: transparent;
            border: none;
            box-shadow: none;
        }
        .custom-popup .leaflet-popup-content-wrapper {
            background: rgba(44, 62, 80, 0.25);
            color: #ffffff;
            font-size:22px;
            font-family:"Montserrat";
            line-height:24px;
            border-radius: 0px;
        }
        .custom-popup .leaflet-popup-content-wrapper a {
            color:rgba(255,255,255,0.1);
        }
        .custom-popup .leaflet-popup-tip-container {
            width:60px;
            height:30px;
        }
        .custom-popup .leaflet-popup-tip {
            background: transparent;
            border: none;
            box-shadow: none;
        }


    </style>

</head>
<body>

<!--<div id="mapid" style="width: 900px; height: 600px;"></div>-->

<div class='custom-popup' id="mapid">




<script>

    var map = L.map('mapid',{ closePopupOnClick: false, zoomControl: false }).setView([20, 0], 2.2);


    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
        maxZoom: 18,
        attribution:'Map data &copy; <ahref="http://openstreetmap.org">OpenStreetMap</a> contributors, '
            + '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>,'
            + 'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
        id: 'mapbox.dark' }).addTo(map);

    var popup = L.popup({
        closeButton: false,
        autoClose: false
    })
        .setLatLng([68.99531118795094, 0])
        .setContent('<p>Working Hour Cultures</p>')
        .openOn(map);

    map.scrollWheelZoom.disable();
    map.dragging.disable();



    var geoJsonFeatureCollection = {
        "type": "FeatureCollection",
        "features": [
            {
                "type": "Feature",
                "properties": {
                    "origin_id": 100,
                    "origin_city": "London",
                    "origin_country": "UK",
                    "origin_lon": 0.1278,
                    "origin_lat": 51.5074,
                    "destination_id": 101,
                    "destination_city": "Johannesburg",
                    "destination_country": "South Africa",
                    "destination_lon": 26.2041,
                    "destination_lat": -28.0473
                },
                "geometry": {
                    "type": "Point",
                    "coordinates":[0.1278, 51.5074]
                }
                },
            {
                "type": "Feature",
                "properties": {
                    "origin_id": 101,
                    "origin_city": "Johannesburg",
                    "origin_country": "South Africa",
                    "origin_lon": 26.2041,
                    "origin_lat": -28.0473,
                    "destination_id": 102,
                    "destination_city": "London",
                    "destination_country": "UK",
                    "destination_lon": 151.209900,
                    "destination_lat": -33.865143
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [26.2041, -28.0473,]
                }
            },
            {
                "type": "Feature",
                "properties": {
                    "origin_id": 102,
                    "origin_city": "Sydney",
                    "origin_country": "Australia",
                    "origin_lon": 151.209900,
                    "origin_lat": -33.865143,
                    "destination_id": 103,
                    "destination_city": "Singapore",
                    "destination_country": "Singapore",
                    "destination_lon":103.851959,
                    "destination_lat": 1.290270
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [151.209900, -33.865143]
                }
            },

            {
                "type": "Feature",
                "properties": {
                    "origin_id": 103,
                    "origin_city": "Singapore",
                    "origin_country": "Singapore",
                    "origin_lon": 103.851959,
                    "origin_lat": 1.290270,
                    "destination_id": 104,
                    "destination_city": "New York",
                    "destination_country": "USA",
                    "destination_lon": -73.935242,
                    "destination_lat": 40.730610
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [103.851959, 1.290270]
                }
            },
            {
                "type": "Feature",
                "properties": {
                    "origin_id": 104,
                    "origin_city": "New York",
                    "origin_country": "USA",
                    "origin_lon": -73.935242,
                    "origin_lat": 40.730610,
                    "destination_id": 105,
                    "destination_city": "Sao Paulo",
                    "destination_country": "Brazil",
                    "destination_lon": -46.62529,
                    "destination_lat": -23.533773
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-73.935242, 40.730610]
                }
            },
            {
                "type": "Feature",
                "properties": {
                    "origin_id": 105,
                    "origin_city": "Sao Paulo",
                    "origin_country": "Brazil",
                    "origin_lon": -46.62529,
                    "origin_lat": -23.533773,
                    "destination_id": 100,
                    "destination_city": "London",
                    "destination_country": "UK",
                    "destination_lon": -46.62529,
                    "destination_lat": -23.533773
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [-46.62529, -23.533773]
                }
            }]
    };




    var myRenderer = L.canvas({ padding: 0.5 });

    var exampleFlowmapLayer = L.canvasFlowmapLayer(geoJsonFeatureCollection, {


        // some custom options
        pathDisplayMode: 'all',
        animationStarted: true,
        animationEasingFamily: 'Cubic',
        animationEasingType: 'In',
        animationDuration: 2000,
        style: function(geoJsonFeature) {
            // use leaflet's path styling options

            // since the GeoJSON feature properties are modified by the layer,
            // developers can rely on the "isOrigin" property to set different
            // symbols for origin vs destination CircleMarker stylings

            if (geoJsonFeature.properties.isOrigin) {
                return {
                    renderer: myRenderer, // recommended to use your own L.canvas()
                    radius: 5,
                    weight: 1,
                    color: 'rgb(195, 255, 62)',
                    fillColor: 'rgba(195, 255, 62, 0.6)',
                    fillOpacity: 0.6
                };
            } else {
                return {
                    renderer: myRenderer,
                    radius: 2.5,
                    weight: 0.25,
                    color: 'rgb(17, 142, 170)',
                    fillColor: 'rgb(17, 142, 170)',
                    fillOpacity: 0.7
                };
            }
        },
        canvasBezierStyle: {
        type: 'classBreaks',
            field: 's_Volume',
            classBreakInfos: [{
            classMinValue: 0,
            classMaxValue: 999999,
            symbol: {
                strokeStyle: '#ef1f26',
                lineWidth: 0.5,
                lineCap: 'round',
                shadowColor: '#ef1f27',
                shadowBlur: 1.5
            }
        }, {
            classMinValue: 1000000,
            classMaxValue: 4999999,
            symbol: {
                strokeStyle: '#c994c7',
                lineWidth: 1.5,
                lineCap: 'round',
                shadowColor: '#c994c7',
                shadowBlur: 1.5
            }
        }, {
            classMinValue: 5000000,
            classMaxValue: 10000000,
            symbol: {
                strokeStyle: '#dd1c77',
                lineWidth: 3,
                lineCap: 'round',
                shadowColor: '#dd1c77',
                shadowBlur: 1.5
            }
        }],
            // the layer will use the defaultSymbol if a data value doesn't fit
            // in any of the defined classBreaks
            defaultSymbol: {
            strokeStyle: '#ef1220',
                lineWidth: 0.5,
                lineCap: 'round',
                shadowColor: '#ef0007',
                shadowBlur: 1.5
        },
    }
    }).addTo(map);

    // exampleFlowmapLayer.on('click', function(e) {
    //     if (e.sharedOriginFeatures.length) {
    //         exampleFlowmapLayer.selectFeaturesForPathDisplay(e.sharedOriginFeatures, 'SELECTION_NEW');
    //     }
    //     if (e.sharedDestinationFeatures.length) {
    //         exampleFlowmapLayer.selectFeaturesForPathDisplay(e.sharedDestinationFeatures, 'SELECTION_NEW');
    //     }
    // });

    // immediately select a few origin points for Bezier path display,
    // instead of waiting for the first user click event to fire
    // exampleFlowmapLayer.selectFeaturesForPathDisplayById('origin_id', 100, true, 'SELECTION_ADD');
    // exampleFlowmapLayer.selectFeaturesForPathDisplayById('s_city_id', 657, true, 'SELECTION_ADD');
    // exampleFlowmapLayer.selectFeaturesForPathDisplayById('s_city_id', 516, true, 'SELECTION_ADD');

    // uniqueOriginOrDestinationIdField, idValue, originBoolean, selectionMode
    // console.log(exampleFlowmapLayer);









</script>

</body>
</html>
